function home(){document.addEventListener("scroll",aboutUpdateScroll)}function shrinkBg(n,t){if(console.info("Page manager event: shrinkBg"),$("#scroll-arrow").css("visibility","visible"),$("floating-header #wrapper")[0]==null){t();return}var i=$("floating-header #wrapper")[0].getBoundingClientRect(),r=$(window).width()-i.left-i.width-15,u=$(window).height()-i.top-i.height-15;floatingHeader.expandedSilent=!1;anime({targets:"#background",bottom:u+"px",right:r+"px",left:"15px",top:"15px",duration:500,easing:"easeInOutCubic",complete:()=>{$("#background").css("left","").css("top","")}});t()}function loadContent(n,t){var u,r,i;if(n.content==null){t();return}if(console.info("Page manager event: loadContent"),$("main").html(n.wrapper.html()),$("#about-description, #content").prepend(n.content),n.pathname!="/"){for(u=n.pathname.replace("/","").toLowerCase(),r=stops[u],$("#content").prepend(`<h1 country='${r.country}'>${r.name}</h1>`),i=0;i<route.length;i++)if(u==route[i].link){if(i>0){let n=route[i-1].type==="country"?route[i-2]:route[i-1];$("#button-prev").attr("onclick",`page('${n.link}')`).html("◀&#xFE0E; "+n.name)}else $("#button-prev").css("visibility","hidden");if(i<route.length-1){let n=route[i+1].type==="country"?route[i+2]:route[i+1];$("#button-next").attr("onclick",`page('${n.link}')`).html(n.name+" ▶&#xFE0E;")}else $("#button-next").css("visibility","hidden");break}floatingHeader.language=r.country}else floatingHeader.language="England";t()}function resolve(n,t){console.info("Page manager event: resolve");n.request.then(i=>{i.status==200?i.blob().then(i=>i.text().then(i=>{n.content=i,t()})):i.status==404?(floatingHeader.expanded=!0,$("main").append($("#not-found-error")[0].content.cloneNode(!0)),transitionIn()):(floatingHeader.expanded=!0,$("main").append($("#unknown-error")[0].content.cloneNode(!0)),console.error(i),transitionIn())},()=>{floatingHeader.expanded=!0,$("main")[0].appendChild($("#network-error")[0].content.cloneNode(!0)),transitionIn()})}function transitionOut(n,t){console.info("Page manager event: transitionOut");anime({targets:"main>*",translateY:[0,20],opacity:0,duration:500,easing:"easeInOutCubic",complete:()=>{$("main").css("visibility","hidden"),t()}})}function transitionIn(){console.info("Page manager event: transitionIn");$("main").css("visibility","");anime({targets:"main>*",translateY:[20,0],opacity:1,duration:500,easing:"easeInOutCubic",complete:()=>{}})}function clearContent(n,t){console.info("Page manager event: clearContent");$("main").html("");document.removeEventListener("scroll",aboutUpdateScroll);t()}function requestAbout(n,t){console.info("Page manager event: requestAbout");n.request=fetch("about.html");n.wrapper=$("#about-wrapper-template").clone();t()}function requestArticle(n,t){console.info("Page manager event: requestArticle");var i=n.pathname;n.request=fetch("articles/"+i.replace("/","")+".html");n.wrapper=$("#article-wrapper-template").clone();t()}function resetScroll(n,t){console.info("Page manager event: resetScroll");window.scrollTo(0,0);t()}function expandBG(n,t){console.info("Page manager event: expandBG");$("#scroll-arrow").css("visibility","hidden");floatingHeader.expanded=!0;t()}function printInfo(n,t){console.info('Page manager event: Moving to page "'+n.pathname+'"!');isInitialSite?setTimeout(()=>{SHEETS_TRACKING.updateValue("Navigation",n.pathname,"string_append"),isInitialSite=!1},5e3):SHEETS_TRACKING.updateValue("Navigation",n.pathname,"string_append");t()}SHEETS_TRACKING.sheetsURL="https://script.google.com/macros/s/AKfycbyCUxU91LZl7Chs0017YWMvYvEUzoOBcVxznNIRGu_D8F1K2Nhd5fLFi1V5xUQN8P1R/exec";SHEETS_TRACKING.sheetName="Zwischenschiene";SHEETS_TRACKING.start();var isInitialSite=!0;page.redirect("/404.html","/");page("/",printInfo,shrinkBg,requestAbout,transitionOut,clearContent,resetScroll,resolve,loadContent,home);page("*",printInfo,requestArticle,transitionOut,expandBG,clearContent,resolve,loadContent,resetScroll,transitionIn);page()